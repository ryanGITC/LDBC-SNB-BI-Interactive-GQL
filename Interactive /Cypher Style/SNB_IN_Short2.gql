// IS2. Recent messages of a person

Create Query message_VIEW as (
MATCH (:Person {id: $personId})<-[:HAS_CREATOR]-(:message)
Return
 message,
 message.id AS messageId,
 message.creationDate AS messageCreationDate
ORDER BY messageCreationDate DESC, messageId ASC
LIMIT 10
)


From message_VIEW, LDBC_SNB
MATCH (message)-[:REPLY_OF]->(post:Post)-[:HAS_CREATOR]->(person)
RETURN  messageId,
 ,coalesce(message.imageFile,message.content) AS messageContent
,messageCreationDate
 ,post.id AS postId,
 ,person.id AS personId,
 ,person.firstName AS FirstName,
 ,person.lastName AS LastName
ORDER BY messageCreationDate DESC
        ,messageId ASC

